var u=Object.defineProperty;var p=(n,e,s)=>e in n?u(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s;var t=(n,e,s)=>p(n,typeof e!="symbol"?e+"":e,s);import{O as f,S as g,P as v,W as L,D as c,_}from"./_plugin-vue_export-helper-DaHlF_CF.js";import{G as k}from"./GLTFLoader-BCqFetf4.js";import{d as x,r as d,o as C,g as S,a as P,c as R,b as h,h as b,f as w}from"./index-BOpLQiOP.js";class z{constructor(e){t(this,"mesh");t(this,"loader");t(this,"animation");t(this,"width");this.loader=new k,this.mesh=new f,this.width=e}tick(){this.move()}async loadMesh(){const e=await this.loader.loadAsync("/spaceportfolio/models/tokyo/scene.gltf");this.mesh=e.scene,this.animation=e.animations,this.mesh.scale.set(1,1,1),this.mesh.rotateX(.8),this.width<900&&(this.mesh.position.x=6,this.mesh.position.y=-3)}move(){this.mesh.rotateY(.008)}}class F{constructor(e,s){t(this,"scene");t(this,"renderer");t(this,"camera");t(this,"meshs");t(this,"mouseXPos");t(this,"mouseYPos");t(this,"height");t(this,"ref");t(this,"pixelRatio");const{width:o,height:i}=e.getBoundingClientRect();this.height=i,this.ref=e,this.meshs=[],this.scene=new g,this.mouseXPos=0,this.mouseYPos=0,this.camera=new v(45,o/i),this.camera.position.set(23,-3,-3),this.camera.lookAt(-5,-4,11.5),this.pixelRatio=o<900?Math.min(window.devicePixelRatio,1.5):window.devicePixelRatio,this.renderer=new L({antialias:o>900,powerPreference:"low-power"}),this.renderer.setClearColor(0,0),this.renderer.setPixelRatio(this.pixelRatio);const a=window.devicePixelRatio>1;this.renderer.setSize(o,i,a);const r=new c(11193514,5);r.position.set(1,1,1).normalize(),this.scene.add(r);const l=new c(16711680,5);l.position.set(5,1,1).normalize(),this.scene.add(l),new c(16777215,10).position.set(5,1,1).normalize(),s.appendChild(this.renderer.domElement);const m=new z(o);(async()=>{await m.loadMesh(),this.meshs.push(m),this.addChildren(),this.setView(),this.registerEventListeners(),this.tick()})()}tick(){this.renderer.render(this.scene,this.camera),this.tickChildren(),requestAnimationFrame(()=>{this.tick()})}addChildren(){for(let e=0;e<this.meshs.length;e++)this.scene.add(this.meshs[e].mesh)}tickChildren(){for(let e=0;e<this.meshs.length;e++)this.meshs[e].tick()}setView(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}isSectionVisible(){return this.ref?this.ref.getBoundingClientRect().top<=0:!1}registerEventListeners(){window.onresize=()=>{this.setView()}}}const y=x({__name:"SceneFour",setup(n){const e=d(),s=d(),o=d(!1),i=()=>{if(!s.value)return;const a=s.value.closest(".HomeFour").getBoundingClientRect();o.value=a.top<=0};return C(()=>{new F(e.value,s.value),window.addEventListener("scroll",i),window.addEventListener("resize",i),i()}),S(()=>{window.removeEventListener("scroll",i),window.removeEventListener("resize",i)}),(a,r)=>(P(),R("section",{class:"HomeFour",ref_key:"scene",ref:e},[h("div",{ref_key:"sceneFour",ref:s,class:b(["Scene",o.value?"Scene--fixed":"Scene--absolute"])},null,2),r[0]||(r[0]=h("div",{class:"HomeFour__presentation"},[h("h2",null,[w("Mes "),h("br"),w(" Projets")])],-1))],512))}}),W=_(y,[["__scopeId","data-v-13b5c5bc"]]);export{W as default};
